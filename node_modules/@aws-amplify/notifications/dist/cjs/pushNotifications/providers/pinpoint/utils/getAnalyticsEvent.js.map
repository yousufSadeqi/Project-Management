{"version":3,"file":"getAnalyticsEvent.js","sources":["../../../../../../src/pushNotifications/providers/pinpoint/utils/getAnalyticsEvent.ts"],"sourcesContent":["\"use strict\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAnalyticsEvent = void 0;\nconst ANDROID_CAMPAIGN_ACTIVITY_ID_KEY = 'pinpoint.campaign.campaign_activity_id';\nconst ANDROID_CAMPAIGN_ID_KEY = 'pinpoint.campaign.campaign_id';\nconst ANDROID_CAMPAIGN_TREATMENT_ID_KEY = 'pinpoint.campaign.treatment_id';\n/**\n * @internal\n */\nconst getAnalyticsEvent = ({ data }, event) => {\n    if (!data) {\n        return null;\n    }\n    const eventAttributes = getAnalyticsEventAttributes(data);\n    if (!eventAttributes) {\n        return null;\n    }\n    const { source, attributes } = eventAttributes;\n    return {\n        attributes,\n        name: `${source}.${event}`,\n    };\n};\nexports.getAnalyticsEvent = getAnalyticsEvent;\nconst getAnalyticsEventAttributes = (data) => {\n    if (!data) {\n        return;\n    }\n    if (Object.prototype.hasOwnProperty.call(data, ANDROID_CAMPAIGN_ID_KEY)) {\n        return {\n            source: '_campaign',\n            attributes: {\n                campaign_activity_id: data[ANDROID_CAMPAIGN_ACTIVITY_ID_KEY],\n                campaign_id: data[ANDROID_CAMPAIGN_ID_KEY],\n                treatment_id: data[ANDROID_CAMPAIGN_TREATMENT_ID_KEY],\n            },\n        };\n    }\n    const pinpoint = typeof data.pinpoint === 'string'\n        ? JSON.parse(data.pinpoint)\n        : data.pinpoint;\n    if (pinpoint?.campaign) {\n        return {\n            source: '_campaign',\n            attributes: pinpoint.campaign,\n        };\n    }\n    if (pinpoint?.journey) {\n        return {\n            source: '_journey',\n            attributes: pinpoint.journey,\n        };\n    }\n};\n"],"names":[],"mappings":";;AACA;AACA;AACA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;AAC7D,OAAO,CAAC,iBAAiB,GAAG,MAAM;AAClC,MAAM,gCAAgC,GAAG,wCAAwC;AACjF,MAAM,uBAAuB,GAAG,+BAA+B;AAC/D,MAAM,iCAAiC,GAAG,gCAAgC;AAC1E;AACA;AACA;AACA,MAAM,iBAAiB,GAAG,CAAC,EAAE,IAAI,EAAE,EAAE,KAAK,KAAK;AAC/C,IAAI,IAAI,CAAC,IAAI,EAAE;AACf,QAAQ,OAAO,IAAI;AACnB;AACA,IAAI,MAAM,eAAe,GAAG,2BAA2B,CAAC,IAAI,CAAC;AAC7D,IAAI,IAAI,CAAC,eAAe,EAAE;AAC1B,QAAQ,OAAO,IAAI;AACnB;AACA,IAAI,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,eAAe;AAClD,IAAI,OAAO;AACX,QAAQ,UAAU;AAClB,QAAQ,IAAI,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;AAClC,KAAK;AACL,CAAC;AACD,OAAO,CAAC,iBAAiB,GAAG,iBAAiB;AAC7C,MAAM,2BAA2B,GAAG,CAAC,IAAI,KAAK;AAC9C,IAAI,IAAI,CAAC,IAAI,EAAE;AACf,QAAQ;AACR;AACA,IAAI,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,uBAAuB,CAAC,EAAE;AAC7E,QAAQ,OAAO;AACf,YAAY,MAAM,EAAE,WAAW;AAC/B,YAAY,UAAU,EAAE;AACxB,gBAAgB,oBAAoB,EAAE,IAAI,CAAC,gCAAgC,CAAC;AAC5E,gBAAgB,WAAW,EAAE,IAAI,CAAC,uBAAuB,CAAC;AAC1D,gBAAgB,YAAY,EAAE,IAAI,CAAC,iCAAiC,CAAC;AACrE,aAAa;AACb,SAAS;AACT;AACA,IAAI,MAAM,QAAQ,GAAG,OAAO,IAAI,CAAC,QAAQ,KAAK;AAC9C,UAAU,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ;AAClC,UAAU,IAAI,CAAC,QAAQ;AACvB,IAAI,IAAI,QAAQ,EAAE,QAAQ,EAAE;AAC5B,QAAQ,OAAO;AACf,YAAY,MAAM,EAAE,WAAW;AAC/B,YAAY,UAAU,EAAE,QAAQ,CAAC,QAAQ;AACzC,SAAS;AACT;AACA,IAAI,IAAI,QAAQ,EAAE,OAAO,EAAE;AAC3B,QAAQ,OAAO;AACf,YAAY,MAAM,EAAE,UAAU;AAC9B,YAAY,UAAU,EAAE,QAAQ,CAAC,OAAO;AACxC,SAAS;AACT;AACA,CAAC;;"}