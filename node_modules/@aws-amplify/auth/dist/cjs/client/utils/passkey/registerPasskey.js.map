{"version":3,"file":"registerPasskey.js","sources":["../../../../../src/client/utils/passkey/registerPasskey.ts"],"sourcesContent":["\"use strict\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.registerPasskey = void 0;\nconst types_1 = require(\"./types\");\nconst serde_1 = require(\"./serde\");\nconst errors_1 = require(\"./errors\");\nconst getIsPasskeySupported_1 = require(\"./getIsPasskeySupported\");\n/**\n * Registers a new passkey for user\n * @param input - PasskeyCreateOptionsJson\n * @returns serialized PasskeyCreateResult\n */\nconst registerPasskey = async (input) => {\n    try {\n        const isPasskeySupported = (0, getIsPasskeySupported_1.getIsPasskeySupported)();\n        (0, errors_1.assertPasskeyError)(isPasskeySupported, errors_1.PasskeyErrorCode.PasskeyNotSupported);\n        const passkeyCreationOptions = (0, serde_1.deserializeJsonToPkcCreationOptions)(input);\n        const credential = await navigator.credentials.create({\n            publicKey: passkeyCreationOptions,\n        });\n        (0, types_1.assertCredentialIsPkcWithAuthenticatorAttestationResponse)(credential);\n        return (0, serde_1.serializePkcWithAttestationToJson)(credential);\n    }\n    catch (err) {\n        throw (0, errors_1.handlePasskeyRegistrationError)(err);\n    }\n};\nexports.registerPasskey = registerPasskey;\n"],"names":[],"mappings":";;AACA;AACA;AACA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;AAC7D,OAAO,CAAC,eAAe,GAAG,MAAM;AAChC,MAAM,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC;AACpC,MAAM,uBAAuB,GAAG,OAAO,CAAC,yBAAyB,CAAC;AAClE;AACA;AACA;AACA;AACA;AACA,MAAM,eAAe,GAAG,OAAO,KAAK,KAAK;AACzC,IAAI,IAAI;AACR,QAAQ,MAAM,kBAAkB,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,qBAAqB,GAAG;AACvF,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,kBAAkB,EAAE,kBAAkB,EAAE,QAAQ,CAAC,gBAAgB,CAAC,mBAAmB,CAAC;AAC3G,QAAQ,MAAM,sBAAsB,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,mCAAmC,EAAE,KAAK,CAAC;AAC9F,QAAQ,MAAM,UAAU,GAAG,MAAM,SAAS,CAAC,WAAW,CAAC,MAAM,CAAC;AAC9D,YAAY,SAAS,EAAE,sBAAsB;AAC7C,SAAS,CAAC;AACV,QAAQ,CAAC,CAAC,EAAE,OAAO,CAAC,yDAAyD,EAAE,UAAU,CAAC;AAC1F,QAAQ,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,iCAAiC,EAAE,UAAU,CAAC;AACzE;AACA,IAAI,OAAO,GAAG,EAAE;AAChB,QAAQ,MAAM,IAAI,QAAQ,CAAC,8BAA8B,EAAE,GAAG,CAAC;AAC/D;AACA,CAAC;AACD,OAAO,CAAC,eAAe,GAAG,eAAe;;"}